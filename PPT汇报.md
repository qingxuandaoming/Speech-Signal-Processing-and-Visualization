---
marp: true
title: 实时语音信号处理系统
description: 课程设计·核心算法与系统实现
author: 陈冠衡
theme: default
paginate: true
footer: "语音信号处理课设 · 2025 · 16kHz/20ms · GitHub: qingxuandaoming"
---

<!-- _class: lead -->
# 实时语音信号处理系统
## 核心算法与系统实现

<!--
Presenter notes:
- 强调“实时性与稳定性”的工程挑战与解决方案。
- 三条主线贯穿：能量、ZCR、谱熵；统一帧配置 16kHz/20ms。
-->

---
# 目录

- 项目概述
- 系统架构
- 核心算法（STE / ZCR / VAD）
- 算法性能与优化
- 实验结果
- 系统演示
- 总结与展望
- Q&A

<!--
Presenter notes:
- 采用“先总后分”的结构，便于课堂节奏把握。
-->

---
# 文档与资源链接

- 项目说明（README）：`README.md`
- 开发指南：`docs/开发指南.md`
- 架构说明：`docs/架构说明.md`
- 算法说明（含 LaTeX 公式）：`docs/算法说明.md`
- 常见问题（FAQ）：`docs/常见问题.md`

<!--
Presenter notes:
- 强调统一入口（Makefile / README）与文档一致性。
-->

---
# 项目概述

- 技术栈：Python + PyAudio + PyQtGraph
- 核心功能：实时采集 / 特征提取 / 语音检测 / 可视化
- 运行配置：`16kHz` 采样率，`20ms` 帧长（`N=320`），`50%` 重叠

<!--
Presenter notes:
- 点明“实时处理 + 稳定展示”双重目标。
- 后续指标均以该帧配置为基准。
-->

---
# 系统架构设计

```text
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   音频采集线程   │    │   信号处理线程   │    │   可视化线程    │
│  (Producer)     │───>│  (Consumer)     │───>│  (Consumer)     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

**设计特点**
- 多线程并发，生产者-消费者模式
- 循环缓冲区 + 锁，降低阻塞与延迟
- 决策平滑（攻击/保持/释放），抑制抖动

<!--
Presenter notes:
- 解释采集→处理→显示的解耦优势与及时性保障。
-->

---
# 核心算法：短时能量（STE）

**公式**

\[ E(i) = \sum_{n=0}^{N-1} x_i(n)^2 \]

**实现**

```python
def calculate_short_time_energy(frame):
    return np.sum(frame ** 2)
```

**应用**
- 区分语音与静音
- 端点检测与强度分析

---
# 核心算法：过零率（ZCR）

**公式**

\[ ZCR(i) = \frac{1}{2N} \sum_{n=0}^{N-1} |\operatorname{sign}(x_i(n)) - \operatorname{sign}(x_i(n+1))| \]

**实现（与代码一致）**

```python
def calculate_zero_crossing_rate(frame):
    signs = np.sign(frame)
    crossings = np.sum(np.abs(np.diff(signs)) > 0)
    return crossings / frame.size
```

**应用**
- 区分清音/浊音与噪声形态
- 与能量联合用于端点检测

<!--
Presenter notes:
- 可选去直流：`frame -= mean(frame)` 在强噪或设备偏置时更稳。
- 高 ZCR 不必然等于噪声；擦音/摩擦音常高 ZCR。
-->

---
# 核心算法：语音活动检测（VAD）

**固定阈值联合判决**

\[\mathrm{VAD}(i) = \begin{cases}
1, & E(i) > T_E \,\land\, \mathrm{ZCR}(i) < T_Z \\
0, & \text{otherwise}
\end{cases}\]

**运行时扩展**
- 能量门控 + `(ZCR 判据) \lor (谱熵判据)`
- 谱熵阈值：`SPECTRAL_ENTROPY_VOICE_MAX = 0.45`
- 平滑：攻击/保持/释放，降低抖动与粘连
- 自动校准：启动阶段采集 `200` 帧估计噪声底

---
# 算法性能与优化

**实时性优化**
- NumPy 向量化计算
- 线程分离（采集/处理/显示）
- 循环缓冲区与最小阻塞

**复杂度**
- STE / ZCR：`O(N)`
- ACF/AMDF：`O(N^2)`（可 FFT 加速）

---
# 实验结果分析

**检测准确率**

| 环境 | 准确率 | 召回率 | F1 |
|------|--------|--------|----|
| 安静 | 98.5%  | 97.8%  | 98.1% |
| 一般 | 94.2%  | 92.6%  | 93.4% |
| 嘈杂 | 87.8%  | 85.3%  | 86.5% |

**实时性能**
- 总延迟 < 120ms，CPU < 15%，内存 < 100MB

<!--
Presenter notes:
- 指出测试在 Windows 11 + 16kHz 条件下可复现。
- 说明延迟构成（采集/处理/显示）与优化点。
-->

---
# 系统演示

**主要功能**
1. 实时波形显示
2. 能量变化趋势
3. 过零率动态
4. 语音检测结果

**操作说明**
- 点击“开始处理”启动/“停止处理”停止
- 点击“保存数据”保存结果

<!--
Presenter notes:
- 展示能量、ZCR、VAD 三曲线联动，观察语音段边界。
- 切换“自适应VAD/自动校准”，比较阈值与判决变化。
- 噪声小实验：轻敲桌面，观察谱熵的噪声抑制作用。
-->

---
# 总结与展望

**主要成果**
- 完整的实时语音处理系统
- 核心算法与工程实现统一
- 通过单元测试与演示验证稳定性

**未来改进**
- 集成深度学习（ASR/端点检测）
- 提升噪声鲁棒性（谱减/子空间/深度去噪）
- 边缘侧部署与能耗优化

---
# Q&A

谢谢！

<!--
Presenter notes:
- 备用材料：参数默认值、阈值策略、UI 开关说明、测试覆盖点。
-->